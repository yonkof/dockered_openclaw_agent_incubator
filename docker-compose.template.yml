version: '3.8'
services:
  openclaw-{{AGENT_NAME}}:
    image: openclaw:local
    container_name: openclaw-{{AGENT_NAME}}
    user: "${UID}:${GID}"
    ports:
      - "{{PORT}}:18789"
    env_file:
      - .env
    volumes:
      - ./workspace:/app/workspace
      - ./config:/root/.openclaw
      - ./scripts/bootstrap.sh:/usr/local/bin/bootstrap-agent:ro
      - ./requirements.txt:/home/node/requirements.txt:ro
      - ./apt-packages.txt:/home/node/apt-packages.txt:ro
    entrypoint: ["/usr/local/bin/bootstrap-agent"]
    command: ["node", "/app/dist/index.js"]
    networks:
      - openclaw-fleet
    restart: unless-stopped

networks:
  openclaw-fleet:
    external: true
